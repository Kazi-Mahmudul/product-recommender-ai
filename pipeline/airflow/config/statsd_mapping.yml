mappings:
  # Airflow scheduler metrics
  - match: "airflow.scheduler.*"
    name: "airflow_scheduler_${1}"
    labels:
      component: "scheduler"

  # Airflow executor metrics
  - match: "airflow.executor.*"
    name: "airflow_executor_${1}"
    labels:
      component: "executor"

  # Airflow DAG metrics
  - match: "airflow.dag.*.*.duration"
    name: "airflow_dag_duration_seconds"
    labels:
      dag_id: "${1}"
      task_id: "${2}"

  - match: "airflow.dag.*.*.success"
    name: "airflow_dag_success_total"
    labels:
      dag_id: "${1}"
      task_id: "${2}"

  - match: "airflow.dag.*.*.failure"
    name: "airflow_dag_failure_total"
    labels:
      dag_id: "${1}"
      task_id: "${2}"

  # Airflow task instance metrics
  - match: "airflow.task_instance.*.*.*.duration"
    name: "airflow_task_instance_duration_seconds"
    labels:
      dag_id: "${1}"
      task_id: "${2}"
      state: "${3}"

  - match: "airflow.task_instance.*.*.*.count"
    name: "airflow_task_instance_count_total"
    labels:
      dag_id: "${1}"
      task_id: "${2}"
      state: "${3}"

  # Airflow pool metrics
  - match: "airflow.pool.*.open_slots"
    name: "airflow_pool_open_slots"
    labels:
      pool: "${1}"

  - match: "airflow.pool.*.used_slots"
    name: "airflow_pool_used_slots"
    labels:
      pool: "${1}"

  - match: "airflow.pool.*.total_slots"
    name: "airflow_pool_total_slots"
    labels:
      pool: "${1}"

  # Airflow operator metrics
  - match: "airflow.operator.*.*.success"
    name: "airflow_operator_success_total"
    labels:
      operator: "${1}"
      dag_id: "${2}"

  - match: "airflow.operator.*.*.failure"
    name: "airflow_operator_failure_total"
    labels:
      operator: "${1}"
      dag_id: "${2}"

  # Airflow database metrics
  - match: "airflow.dag_processing.*.*.duration"
    name: "airflow_dag_processing_duration_seconds"
    labels:
      dag_file: "${1}"
      processor: "${2}"

  - match: "airflow.dag_processing.*.*.count"
    name: "airflow_dag_processing_count_total"
    labels:
      dag_file: "${1}"
      processor: "${2}"

  # Airflow webserver metrics
  - match: "airflow.webserver.*"
    name: "airflow_webserver_${1}"
    labels:
      component: "webserver"

  # Airflow worker metrics
  - match: "airflow.celery.*.*.*.duration"
    name: "airflow_celery_task_duration_seconds"
    labels:
      worker: "${1}"
      dag_id: "${2}"
      task_id: "${3}"

  - match: "airflow.celery.*.*.*.count"
    name: "airflow_celery_task_count_total"
    labels:
      worker: "${1}"
      dag_id: "${2}"
      task_id: "${3}"

  # Generic Airflow metrics
  - match: "airflow.*"
    name: "airflow_${1}"
    labels:
      component: "airflow"